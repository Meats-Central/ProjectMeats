# ProjectMeats Backend - Production Environment
# This file contains production-specific environment variables

# =============================================================================
# DJANGO CORE SETTINGS
# =============================================================================
DEBUG=False
SECRET_KEY=${PRODUCTION_SECRET_KEY}
ALLOWED_HOSTS=${PRODUCTION_DOMAIN},${PRODUCTION_API_DOMAIN}

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# Production uses PostgreSQL with connection pooling
DATABASE_URL=postgresql://${PRODUCTION_DB_USER}:${PRODUCTION_DB_PASSWORD}@${PRODUCTION_DB_HOST}:${PRODUCTION_DB_PORT}/${PRODUCTION_DB_NAME}

# =============================================================================
# CORS & CSRF SETTINGS
# =============================================================================
# Restrict to production domain only
CORS_ALLOWED_ORIGINS=https://${PRODUCTION_FRONTEND_DOMAIN}
CSRF_TRUSTED_ORIGINS=https://${PRODUCTION_FRONTEND_DOMAIN},https://${PRODUCTION_API_DOMAIN}

# =============================================================================
# API CONFIGURATION
# =============================================================================
API_VERSION=v1

# =============================================================================
# AI SERVICES (Production)
# =============================================================================
OPENAI_API_KEY=${PRODUCTION_OPENAI_API_KEY}
ANTHROPIC_API_KEY=${PRODUCTION_ANTHROPIC_API_KEY}

# =============================================================================
# EMAIL CONFIGURATION (Production)
# =============================================================================
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
EMAIL_HOST=${PRODUCTION_EMAIL_HOST}
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=${PRODUCTION_EMAIL_USER}
EMAIL_HOST_PASSWORD=${PRODUCTION_EMAIL_PASSWORD}

# =============================================================================
# FILE STORAGE (Production)
# =============================================================================
# Production should use cloud storage
AWS_STORAGE_BUCKET_NAME=${PRODUCTION_S3_BUCKET}
AWS_ACCESS_KEY_ID=${PRODUCTION_AWS_ACCESS_KEY}
AWS_SECRET_ACCESS_KEY=${PRODUCTION_AWS_SECRET_KEY}
AWS_S3_REGION_NAME=${PRODUCTION_AWS_REGION}
AWS_S3_CUSTOM_DOMAIN=${PRODUCTION_CDN_DOMAIN}
MEDIA_ROOT=media/
STATIC_ROOT=staticfiles/

# =============================================================================
# LOGGING & DEBUGGING
# =============================================================================
LOG_LEVEL=WARNING

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================
# Production uses Redis with connection pooling
CACHE_URL=redis://${PRODUCTION_REDIS_HOST}:${PRODUCTION_REDIS_PORT}/1

# =============================================================================
# SECURITY SETTINGS (Production)
# =============================================================================
SECURE_SSL_REDIRECT=True
SECURE_HSTS_SECONDS=31536000
SECURE_HSTS_INCLUDE_SUBDOMAINS=True
SECURE_HSTS_PRELOAD=True
SECURE_BROWSER_XSS_FILTER=True
SECURE_CONTENT_TYPE_NOSNIFF=True
X_FRAME_OPTIONS=DENY

# =============================================================================
# MONITORING & ALERTING (Production)
# =============================================================================
SENTRY_DSN=${PRODUCTION_SENTRY_DSN}
NEW_RELIC_LICENSE_KEY=${PRODUCTION_NEWRELIC_KEY}
DATADOG_API_KEY=${PRODUCTION_DATADOG_KEY}

# =============================================================================
# PERFORMANCE & SCALING
# =============================================================================
# Database connection pooling
DB_CONN_MAX_AGE=600
DB_CONN_POOL_SIZE=20

# Background task processing
CELERY_BROKER_URL=redis://${PRODUCTION_REDIS_HOST}:${PRODUCTION_REDIS_PORT}/2
CELERY_RESULT_BACKEND=redis://${PRODUCTION_REDIS_HOST}:${PRODUCTION_REDIS_PORT}/3

# =============================================================================
# PRODUCTION SPECIFIC FEATURES
# =============================================================================
# Disable admin and docs in production
ENABLE_ADMIN_INTERFACE=False
ENABLE_API_DOCS=False

# Rate limiting
RATELIMIT_ENABLE=True
RATELIMIT_VIEW=1000/h
RATELIMIT_LOGIN=5/m

# =============================================================================
# SUPERUSER CONFIGURATION
# =============================================================================
# Credentials for automatic superuser and root tenant creation
# CRITICAL: Use strong passwords from secure secret management system
SUPERUSER_USERNAME=${PRODUCTION_SUPERUSER_USERNAME}
SUPERUSER_EMAIL=${PRODUCTION_SUPERUSER_EMAIL}
SUPERUSER_PASSWORD=${PRODUCTION_SUPERUSER_PASSWORD}
# Password sync variable for deployment automation (set in GitHub Secrets)
ENVIRONMENT_SUPERUSER_PASSWORD=${PRODUCTION_SUPERUSER_PASSWORD}