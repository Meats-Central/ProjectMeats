# ProjectMeats Backend - Staging Environment
# This file contains staging-specific environment variables

# =============================================================================
# DJANGO CORE SETTINGS
# =============================================================================
# These environment variables must be set in GitHub Secrets (uat2-backend environment)
# and on the staging server's environment configuration
DEBUG=False
SECRET_KEY=${STAGING_SECRET_KEY}
ALLOWED_HOSTS=${STAGING_DOMAIN},${STAGING_API_DOMAIN}

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# Staging uses PostgreSQL
# These environment variables must be set in GitHub Secrets (uat2-backend environment)
# and on the staging server's environment configuration
DATABASE_URL=postgresql://${STAGING_DB_USER}:${STAGING_DB_PASSWORD}@${STAGING_DB_HOST}:${STAGING_DB_PORT}/${STAGING_DB_NAME}

# =============================================================================
# CORS & CSRF SETTINGS
# =============================================================================
# Allow staging frontend domain
# STAGING_FRONTEND_DOMAIN and STAGING_API_DOMAIN must be set in GitHub Secrets
CORS_ALLOWED_ORIGINS=https://${STAGING_FRONTEND_DOMAIN}
CSRF_TRUSTED_ORIGINS=https://${STAGING_FRONTEND_DOMAIN},https://${STAGING_API_DOMAIN}

# =============================================================================
# API CONFIGURATION
# =============================================================================
API_VERSION=v1

# =============================================================================
# AI SERVICES (Staging)
# =============================================================================
# Optional: Set these in GitHub Secrets (uat2-backend environment) if AI features are enabled
OPENAI_API_KEY=${STAGING_OPENAI_API_KEY}
ANTHROPIC_API_KEY=${STAGING_ANTHROPIC_API_KEY}

# =============================================================================
# EMAIL CONFIGURATION (Staging)
# =============================================================================
# Optional: Set these in GitHub Secrets (uat2-backend environment) if email is enabled
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
EMAIL_HOST=${STAGING_EMAIL_HOST}
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=${STAGING_EMAIL_USER}
EMAIL_HOST_PASSWORD=${STAGING_EMAIL_PASSWORD}

# =============================================================================
# FILE STORAGE (Staging)
# =============================================================================
MEDIA_ROOT=media/
STATIC_ROOT=staticfiles/
# For cloud storage: 
# AWS_STORAGE_BUCKET_NAME=${STAGING_S3_BUCKET}
# AWS_ACCESS_KEY_ID=${STAGING_AWS_ACCESS_KEY}
# AWS_SECRET_ACCESS_KEY=${STAGING_AWS_SECRET_KEY}
# AWS_S3_REGION_NAME=${STAGING_AWS_REGION}

# =============================================================================
# LOGGING & DEBUGGING
# =============================================================================
LOG_LEVEL=INFO

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================
# Optional: Staging can use Redis. Set these in GitHub Secrets if Redis is configured
# For local caching fallback, Django will use locmem cache (see staging.py settings)
CACHE_URL=redis://${STAGING_REDIS_HOST}:${STAGING_REDIS_PORT}/1

# =============================================================================
# SECURITY SETTINGS (Staging)
# =============================================================================
SECURE_SSL_REDIRECT=True
SECURE_HSTS_SECONDS=31536000
SECURE_HSTS_INCLUDE_SUBDOMAINS=True
SECURE_HSTS_PRELOAD=True

# =============================================================================
# MONITORING & ALERTING
# =============================================================================
# Optional: Add monitoring service keys here. Set in GitHub Secrets if Sentry is configured
SENTRY_DSN=${STAGING_SENTRY_DSN}

# =============================================================================
# STAGING SPECIFIC FEATURES
# =============================================================================
# Features enabled for staging testing
ENABLE_ADMIN_INTERFACE=True
ENABLE_API_DOCS=True

# =============================================================================
# SUPERUSER CONFIGURATION
# =============================================================================
# Credentials for automatic superuser and root tenant creation
# IMPORTANT: These are passed as environment variables during deployment
# Set these in GitHub Secrets for the uat2-backend environment:
# - STAGING_SUPERUSER_USERNAME
# - STAGING_SUPERUSER_EMAIL  
# - STAGING_SUPERUSER_PASSWORD
# The deployment workflow passes these directly to the setup_superuser management command
STAGING_SUPERUSER_USERNAME=${STAGING_SUPERUSER_USERNAME}
STAGING_SUPERUSER_EMAIL=${STAGING_SUPERUSER_EMAIL}
STAGING_SUPERUSER_PASSWORD=${STAGING_SUPERUSER_PASSWORD}